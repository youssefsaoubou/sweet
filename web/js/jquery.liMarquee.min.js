/*
 * jQuery liMarquee v 4.4
 *
 * Copyright 2013, Linnik Yura | LI MASS CODE | http://masscode.ru
 * http://masscode.ru/index.php/k2/item/44-limarquee
 * Free to use
 *
 * Last Update 27.04.2014
 */
!function(t){var o={init:function(o){var e={direction:"left",loop:-1,scrolldelay:0,scrollamount:50,circular:!0,drag:!0,runshort:!0,hoverstop:!0,inverthover:!1,xml:!1};return o&&t.extend(e,o),this.each(function(){var o="mouseenter",i="mouseleave";e.inverthover&&(o="mouseleave",i="mouseenter");var s=e.loop,n=t(this).addClass("str_wrap"),r=!1,l=n.attr("style");if(l)for(var f=l.split(";"),c=!1,a=0;a<f.length;a++){var h=t.trim(f[a]),u=h.search(/^height/g);-1!=u&&(c=parseFloat(n.css("height")))}var v=function(){n.off("mouseleave"),n.off("mouseenter"),n.off("mousemove"),n.off("mousedown"),n.off("mouseup"),t(".str_move",n).length||n.wrapInner(t("<div>").addClass("str_move"));var l=t(".str_move",n).addClass("str_origin"),f=l.clone().removeClass("str_origin").addClass("str_move_clone"),c=0;e.hoverstop||n.addClass("noStop");var a=function(){f.clone().css({left:"100%",right:"auto",width:l.width()}).appendTo(l),f.css({right:"100%",left:"auto",width:l.width()}).appendTo(l)},h=function(){f.clone().css({top:"100%",bottom:"auto",height:l.height()}).appendTo(l),f.css({bottom:"100%",top:"auto",height:l.height()}).appendTo(l)};if("left"==e.direction)if(n.height(l.outerHeight()),l.width()>n.width()){var u=-l.width();e.circular&&(e.xml||(a(),u=-(l.width()+(l.width()-n.width())))),e.xml&&l.css({left:n.width()});var v=n.width(),p=0,d=function(){var t=Math.abs(u),o=t/e.scrollamount*1e3;return 0!=parseFloat(l.css("left"))&&(t+=n.width(),o=(t-(n.width()-parseFloat(l.css("left"))))/e.scrollamount*1e3),o},m=!1,g=function(){0!=s&&l.stop(!0).animate({left:u},d(),"linear",function(){t(this).css({left:n.width()}),-1==s?m=setTimeout(g,e.scrolldelay):(s--,m=setTimeout(g,e.scrolldelay))})};e.inverthover||g(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),clearTimeout(m),l.stop(!0)}).on(i,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),g()}),e.drag?n.on("mousedown",function(o){e.inverthover&&l.stop(!0);var i,s,f=1,c=o.clientX;return v=l.position().left,p=v-(o.clientX-n.offset().left),t(this).on("mousemove",function(t){r=!0,s=t.clientX,f=s>c?1:-1,c=s,i=p+(t.clientX-n.offset().left),e.circular?(i<-l.width()&&0>f&&(i=0,v=l.position().left,p=v-(t.clientX-n.offset().left)),i>0&&f>0&&(i=-l.width(),v=l.position().left,p=v-(t.clientX-n.offset().left))):(i<-l.width()&&0>f&&(i=n.width(),v=l.position().left,p=v-(t.clientX-n.offset().left)),i>n.width()&&f>0&&(i=-l.width(),v=l.position().left,p=v-(t.clientX-n.offset().left))),l.stop(!0).css({left:i})}).on("mouseup",function(){t(this).off("mousemove"),e.inverthover&&l.trigger("mouseenter"),setTimeout(function(){r=!1},50)}),!1}).on("click",function(){return r?!1:void 0}):n.addClass("no_drag"))}else if(e.runshort){l.css({left:n.width()});var v=n.width(),p=0,w=function(){return c=(l.width()+l.position().left)/e.scrollamount*1e3},T=function(){var o=-l.width();l.animate({left:o},w(),"linear",function(){t(this).css({left:n.width()}),-1==s?setTimeout(T,e.scrolldelay):(s--,setTimeout(T,e.scrolldelay))})};e.inverthover||T(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(i,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),T()}),e.drag?n.on("mousedown",function(o){e.inverthover&&l.stop(!0);var i,s,f=1,c=o.clientX;return v=l.position().left,p=v-(o.clientX-n.offset().left),t(this).on("mousemove",function(t){r=!0,s=t.clientX,f=s>c?1:-1,c=s,i=p+(t.clientX-n.offset().left),i<-l.width()&&0>f&&(i=n.width(),v=l.position().left,p=v-(t.clientX-n.offset().left)),i>n.width()&&f>0&&(i=-l.width(),v=l.position().left,p=v-(t.clientX-n.offset().left)),l.stop(!0).css({left:i})}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove"),setTimeout(function(){r=!1},50)}),!1}).on("click",function(){return r?!1:void 0}):n.addClass("no_drag"))}else n.addClass("str_static");if("right"==e.direction)if(n.height(l.outerHeight()),n.addClass("str_right"),l.css({left:-l.width(),right:"auto"}),l.width()>n.width()){var u=n.width();l.css({left:0}),e.circular&&(e.xml||(a(),u=l.width()));var _=0;w=function(){var t=n.width(),o=t/e.scrollamount*1e3;return 0!=parseFloat(l.css("left"))&&(t=l.width()+n.width(),o=(t-(l.width()+parseFloat(l.css("left"))))/e.scrollamount*1e3),o};var T=function(){0!=s&&l.animate({left:u},w(),"linear",function(){t(this).css({left:-l.width()}),-1==s?setTimeout(T,e.scrolldelay):(s--,setTimeout(T,e.scrolldelay))})};e.inverthover||T(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(i,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),T()}),e.drag?n.on("mousedown",function(o){e.inverthover&&l.stop(!0);var i,s,f=1,c=o.clientX;return v=l.position().left,_=v-(o.clientX-n.offset().left),t(this).on("mousemove",function(t){r=!0,s=t.clientX,f=s>c?1:-1,c=s,i=_+(t.clientX-n.offset().left),e.circular?(i<-l.width()&&0>f&&(i=0,v=l.position().left,_=v-(t.clientX-n.offset().left)),i>0&&f>0&&(i=-l.width(),v=l.position().left,_=v-(t.clientX-n.offset().left))):(i<-l.width()&&0>f&&(i=n.width(),v=l.position().left,_=v-(t.clientX-n.offset().left)),i>n.width()&&f>0&&(i=-l.width(),v=l.position().left,_=v-(t.clientX-n.offset().left))),l.stop(!0).css({left:i})}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove"),setTimeout(function(){r=!1},50)}),!1}).on("click",function(){return r?!1:void 0}):n.addClass("no_drag"))}else if(e.runshort){var _=0,w=function(){return c=(n.width()-l.position().left)/e.scrollamount*1e3},T=function(){var o=n.width();l.animate({left:o},w(),"linear",function(){t(this).css({left:-l.width()}),-1==s?setTimeout(T,e.scrolldelay):(s--,setTimeout(T,e.scrolldelay))})};e.inverthover||T(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(i,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),T()}),e.drag?n.on("mousedown",function(o){e.inverthover&&l.stop(!0);var i,s,f=1,c=o.clientX;return v=l.position().left,_=v-(o.clientX-n.offset().left),t(this).on("mousemove",function(t){r=!0,s=t.clientX,f=s>c?1:-1,c=s,i=_+(t.clientX-n.offset().left),i<-l.width()&&0>f&&(i=n.width(),v=l.position().left,_=v-(t.clientX-n.offset().left)),i>n.width()&&f>0&&(i=-l.width(),v=l.position().left,_=v-(t.clientX-n.offset().left)),l.stop(!0).css({left:i})}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove"),setTimeout(function(){r=!1},50)}),!1}).on("click",function(){return r?!1:void 0}):n.addClass("no_drag"))}else n.addClass("str_static");if("up"==e.direction)if(n.addClass("str_vertical"),l.height()>n.height()){var C=-l.height();e.circular&&(e.xml||(h(),C=-(l.height()+(l.height()-n.height())))),e.xml&&l.css({top:n.height()});var _=0;w=function(){var t=Math.abs(C),o=t/e.scrollamount*1e3;return 0!=parseFloat(l.css("top"))&&(t+=n.height(),o=(t-(n.height()-parseFloat(l.css("top"))))/e.scrollamount*1e3),o};var T=function(){0!=s&&l.animate({top:C},w(),"linear",function(){t(this).css({top:n.height()}),-1==s?setTimeout(T,e.scrolldelay):(s--,setTimeout(T,e.scrolldelay))})};e.inverthover||T(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(i,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),T()}),e.drag?n.on("mousedown",function(o){e.inverthover&&l.stop(!0);var i,s,f=1,c=o.clientY;return strMoveTop=l.position().top,_=strMoveTop-(o.clientY-n.offset().top),t(this).on("mousemove",function(t){r=!0,s=t.clientY,s>c?f=1:c>s&&(f=-1),c=s,i=_+t.clientY-n.offset().top,e.circular?(i<-l.height()&&0>f&&(i=0,strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top)),i>0&&f>0&&(i=-l.height(),strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top))):(i<-l.height()&&0>f&&(i=n.height(),strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top)),i>n.height()&&f>0&&(i=-l.height(),strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top))),l.stop(!0).css({top:i})}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove"),setTimeout(function(){r=!1},50)}),!1}).on("click",function(){return r?!1:void 0}):n.addClass("no_drag"))}else if(e.runshort){l.css({top:n.height()});var _=0,w=function(){return c=(l.height()+l.position().top)/e.scrollamount*1e3},T=function(){var o=-l.height();l.animate({top:o},w(),"linear",function(){t(this).css({top:n.height()}),-1==s?setTimeout(T,e.scrolldelay):(s--,setTimeout(T,e.scrolldelay))})};e.inverthover||T(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(i,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),T()}),e.drag?n.on("mousedown",function(o){e.inverthover&&l.stop(!0);var i,s,f=1,c=o.clientY;return strMoveTop=l.position().top,_=strMoveTop-(o.clientY-n.offset().top),t(this).on("mousemove",function(t){r=!0,s=t.clientY,s>c?f=1:c>s&&(f=-1),c=s,i=_+t.clientY-n.offset().top,i<-l.height()&&0>f&&(i=n.height(),strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top)),i>n.height()&&f>0&&(i=-l.height(),strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top)),l.stop(!0).css({top:i})}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove"),setTimeout(function(){r=!1},50)}),!1}).on("click",function(){return r?!1:void 0}):n.addClass("no_drag"))}else n.addClass("str_static");if("down"==e.direction)if(n.addClass("str_vertical").addClass("str_down"),l.css({top:-l.height(),bottom:"auto"}),l.height()>n.height()){var C=n.height();e.circular&&(e.xml||(h(),C=l.height())),e.xml&&l.css({top:-l.height()});var _=0;w=function(){var t=n.height(),o=t/e.scrollamount*1e3;return 0!=parseFloat(l.css("top"))&&(t=l.height()+n.height(),o=(t-(l.height()+parseFloat(l.css("top"))))/e.scrollamount*1e3),o};var T=function(){0!=s&&l.animate({top:C},w(),"linear",function(){t(this).css({top:-l.height()}),-1==s?setTimeout(T,e.scrolldelay):(s--,setTimeout(T,e.scrolldelay))})};e.inverthover||T(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(i,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),T()}),e.drag?n.on("mousedown",function(o){e.inverthover&&l.stop(!0);var i,s,f=1,c=o.clientY;return strMoveTop=l.position().top,_=strMoveTop-(o.clientY-n.offset().top),t(this).on("mousemove",function(t){r=!0,s=t.clientY,s>c?f=1:c>s&&(f=-1),c=s,i=_+t.clientY-n.offset().top,e.circular?(i<-l.height()&&0>f&&(i=0,strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top)),i>0&&f>0&&(i=-l.height(),strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top))):(i<-l.height()&&0>f&&(i=n.height(),strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top)),i>n.height()&&f>0&&(i=-l.height(),strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top))),l.stop(!0).css({top:i})}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove"),setTimeout(function(){r=!1},50)}),!1}).on("click",function(){return r?!1:void 0}):n.addClass("no_drag"))}else if(e.runshort){var _=0,w=function(){return c=(n.height()-l.position().top)/e.scrollamount*1e3},T=function(){var o=n.height();l.animate({top:o},w(),"linear",function(){t(this).css({top:-l.height()}),-1==s?setTimeout(T,e.scrolldelay):(s--,setTimeout(T,e.scrolldelay))})};e.inverthover||T(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(i,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),T()}),e.drag?n.on("mousedown",function(o){e.inverthover&&l.stop(!0);var i,s,f=1,c=o.clientY;return strMoveTop=l.position().top,_=strMoveTop-(o.clientY-n.offset().top),t(this).on("mousemove",function(t){r=!0,s=t.clientY,s>c?f=1:c>s&&(f=-1),c=s,i=_+t.clientY-n.offset().top,i<-l.height()&&0>f&&(i=n.height(),strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top)),i>n.height()&&f>0&&(i=-l.height(),strMoveTop=l.position().top,_=strMoveTop-(t.clientY-n.offset().top)),l.stop(!0).css({top:i})}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove"),setTimeout(function(){r=!1},50)}),!1}).on("click",function(){return r?!1:void 0}):n.addClass("no_drag"))}else n.addClass("str_static")};e.xml?t.ajax({url:e.xml,dataType:"xml",success:function(o){for(var i=t(o).find("text"),s=i.length,r=0;s>r;r++){var l=i.eq(r),f=l.text(),c=t("<span>").text(f).appendTo(n);("left"==e.direction||"right"==e.direction)&&(c.css({display:"inline-block",textAlign:"right"}),r>0&&c.css({width:n.width()+c.width()})),("down"==e.direction||"up"==e.direction)&&(c.css({display:"block",textAlign:"left"}),r>0&&c.css({paddingTop:n.height()}))}v()}}):v(),n.data({ini:v,startheight:c})})},update:function(){var o=t(this),e=t(".str_origin",o),i=t(".str_move_clone",o);e.stop(!0),i.remove(),o.data("ini")()},destroy:function(){var o=t(this),e=t(".str_move",o),i=o.data("startheight");t(".str_move_clone",o).remove(),o.off("mouseenter"),o.off("mousedown"),o.off("mouseup"),o.off("mouseleave"),o.off("mousemove"),o.removeClass("noStop").removeClass("str_vertical").removeClass("str_active").removeClass("no_drag").removeClass("str_static").removeClass("str_right").removeClass("str_down");var s=o.attr("style");if(s){for(var n=s.split(";"),r=0;r<n.length;r++){var l=t.trim(n[r]),f=l.search(/^height/g);-1!=f&&(n[r]="")}var c=n.join(";"),a=c.replace(/;+/g,";");";"==a?o.removeAttr("style"):o.attr("style",a),i&&o.css({height:i})}if(e.stop(!0),e.length){var h=e.html();e.remove(),o.html(h)}}};t.fn.liMarquee=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Метод "+e+" в jQuery.liMarquee не существует"):o.init.apply(this,arguments)}}(jQuery);